<!-- ===================================================================
 *
 *  Advent of Code | 2021
 *  By Joana Sesinando
 *
 * =================================================================== -->

<!DOCTYPE html>
<html lang="en">
    
    <head>

        <!-- Basic Page Needs
   	    ================================================== -->
        <meta charset="utf-8" />
        <title>Advent of Code | 2021</title>
        <meta name="author" content="Joana Sesinando">

        <!-- Mobile & Compatibility Metas
 	    ================================================== -->
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
	    <meta name="viewport" content="width=device-width, initial-scale=1">

        <!-- Fonts
  	    ================================================== -->
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Chewy&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

        <!-- Icons
  	    ================================================== -->
	    <link rel="stylesheet" href="https://cdn.lineicons.com/2.0/LineIcons.css">

        <!-- Styles
  	    ================================================== -->
        <link href="../styles.css" rel="stylesheet">

        <!-- Scripts
  	    ================================================== -->
        <script src="https://unpkg.com/scrollreveal"></script>

    </head>

    <body class="is-boxed has-animations">

        <div class="body-wrap boxed-container">
            <main>

                <!-- Home button -->
                <a href="../">
                    <i class="home-icon lni lni-home"></i>
                </a>

                <section class="advent section text-center" id="section-advent">
                    <div class="container">

                        <!-- Title -->
                        <div class="advent-title is-revealing">
                            <h1 class="section-title">2021</h2>
                            <p class="section-subtitle text-center">Upload an input file and select an advent day to run the code. <br/>I used <strong>JavaScript</strong> to solve the puzzles.</p>
                        </div>

                        <!-- Puzzle input -->
                        <div class="advent-input input-form field field-grouped is-revealing">
                            <div class="control control-expanded">
                                <label id="input-label" class="label" for="input">Upload file...</label>
                                <input class="input" type="file" id="input" name="input" accept=".txt">
                            </div>
                            <div class="control">
                                <a class="button button-primary button-block button-shadow" href="#">Upload puzzle input</a>
                            </div>
                        </div>

                        <!-- Advent calendar -->
                        <div class="advent-inner section-inner">
                            <div class="advent-wrap">

                                <div class="timeline">

                                    <!-- Day 1 -->
                                    <div class="timeline-item is-revealing">
                                        <button class="timeline-item-inner purple" onclick="run(1)">
                                            <div class="timeline-item-icon">
                                                <img src="../assets/blob_purple.svg" alt="blob">
                                                <span>1</span>
                                            </div>
                                            <div class="timeline-item-text">Sonar Sweep</div>
                                        </button>
                                    </div>

                                    <!-- Day 2 -->
                                    <div class="timeline-item is-revealing">
                                        <button class="timeline-item-inner pink" onclick="run(2)">
                                            <div class="timeline-item-icon">
                                                <img src="../assets/blob_pink.svg" alt="blob">
                                                <span>2</span>
                                            </div>
                                            <div class="timeline-item-text">Dive!</div>
                                        </a>
                                    </div>

                                    <!-- Day 3 -->
                                    <div class="timeline-item is-revealing">
                                        <button class="timeline-item-inner green" onclick="run(3)">
                                            <div class="timeline-item-icon">
                                                <img src="../assets/blob_green.svg" alt="blob">
                                                <span>3</span>
                                            </div>
                                            <div class="timeline-item-text">Binary Diagnostic</div>
                                        </a>
                                    </div>

                                    <!-- Day 4 -->
                                    <div class="timeline-item is-revealing">
                                        <button class="timeline-item-inner blue" onclick="run(4)">
                                            <div class="timeline-item-icon">
                                                <img src="../assets/blob_blue.svg" alt="blob">
                                                <span>4</span>
                                            </div>
                                            <div class="timeline-item-text">Giant Squid</div>
                                        </a>
                                    </div>

                                    <!-- Day 5 -->
                                    <div class="timeline-item is-revealing">
                                        <button class="timeline-item-inner pink" onclick="run(5)">
                                            <div class="timeline-item-icon">
                                                <img src="../assets/blob_pink.svg" alt="blob">
                                                <span>5</span>
                                            </div>
                                            <div class="timeline-item-text">Hydrothermal Venture</div>
                                        </a>
                                    </div>

                                    <!-- Day 6 -->
                                    <div class="timeline-item is-revealing">
                                        <button class="timeline-item-inner purple" onclick="run(6)">
                                            <div class="timeline-item-icon">
                                                <img src="../assets/blob_purple.svg" alt="blob">
                                                <span>6</span>
                                            </div>
                                            <div class="timeline-item-text">Lanternfish</div>
                                        </button>
                                    </div>

                                    <!-- Day 7 -->
                                    <div class="timeline-item is-revealing">
                                        <button class="timeline-item-inner green" onclick="run(7)">
                                            <div class="timeline-item-icon">
                                                <img src="../assets/blob_green.svg" alt="blob">
                                                <span>7</span>
                                            </div>
                                            <div class="timeline-item-text">The Treachery of Whales</div>
                                        </a>
                                    </div>

                                    <!-- Day 8 -->
                                    <div class="timeline-item is-revealing">
                                        <button class="timeline-item-inner pink" onclick="run(8)">
                                            <div class="timeline-item-icon">
                                                <img src="../assets/blob_pink.svg" alt="blob">
                                                <span>8</span>
                                            </div>
                                            <div class="timeline-item-text">Seven Segment Search</div>
                                        </a>
                                    </div>

                                    <!-- Day 9 -->
                                    <div class="timeline-item is-revealing">
                                        <button class="timeline-item-inner blue" onclick="run(9)">
                                            <div class="timeline-item-icon">
                                                <img src="../assets/blob_blue.svg" alt="blob">
                                                <span>9</span>
                                            </div>
                                            <div class="timeline-item-text">Smoke Basin</div>
                                        </a>
                                    </div>

                                    <!-- Day 10 -->
                                    <div class="timeline-item is-revealing">
                                        <button class="timeline-item-inner purple" onclick="run(10)">
                                            <div class="timeline-item-icon">
                                                <img src="../assets/blob_purple.svg" alt="blob">
                                                <span>10</span>
                                            </div>
                                            <div class="timeline-item-text">Syntax Scoring</div>
                                        </button>
                                    </div>

                                    <!-- Day 11 -->
                                    <div class="timeline-item is-revealing">
                                        <button class="timeline-item-inner pink" onclick="run(11)">
                                            <div class="timeline-item-icon">
                                                <img src="../assets/blob_pink.svg" alt="blob">
                                                <span>11</span>
                                            </div>
                                            <div class="timeline-item-text">Dumbo Octopus</div>
                                        </a>
                                    </div>

                                    <!-- Day 12 -->
                                    <div class="timeline-item is-revealing">
                                        <button class="timeline-item-inner green" onclick="run(12)">
                                            <div class="timeline-item-icon">
                                                <img src="../assets/blob_green.svg" alt="blob">
                                                <span>12</span>
                                            </div>
                                            <div class="timeline-item-text">Passage Pathing</div>
                                        </a>
                                    </div>

                                    <!-- Day 13 -->
                                    <div class="timeline-item is-revealing">
                                        <button class="timeline-item-inner purple" onclick="run(13)">
                                            <div class="timeline-item-icon">
                                                <img src="../assets/blob_purple.svg" alt="blob">
                                                <span>13</span>
                                            </div>
                                            <div class="timeline-item-text">Transparent Origami</div>
                                        </button>
                                    </div>

                                </div>
                            </div>
                        </div>
                    </div>
                </section>
            </main>
        </div>

        <!-- Credits & Repository -->
        <footer class="d-flex align-items-center justify-content-center">
            <span style="margin-right: 10px;">by Joana Sesinando | </span>
            <a class="repository d-flex align-items-center" href="https://github.com/joanasesinando/advent-of-code" target="_blank">
                <i class="lni lni-github-original"></i>See code
            </a>
         </footer>


        <!-- Alerts -->
        <div id="alert-success" role="alert" onclick="hide('alert-success')" class="alert alert-success">
            <p class="alert-text"></p>
        </div>

        <div id="alert-error" role="alert" onclick="hide('alert-error')" class="alert alert-error">
            <p class="alert-text"></p>
        </div>


        <script>
            YEAR = 2021;

            // Include advent days' scripts
            for (i = 1; i <= 25; i++) {
                includeScript("./day-" + numberWith2Digits(i) + "/script.js");
            }

            // Init scroll reveal
            ScrollReveal().reveal(".is-revealing");

            // Trigger file upload
            document.getElementsByClassName("advent-input")[0].addEventListener("click", () => {
                document.getElementById("input").click();
            });

            // Subscribe to file upload
            document.getElementById("input").addEventListener("change", (event) => {
                const file = document.getElementById("input").files[0];
                if (file) document.getElementById("input-label").innerHTML = file.name;
            });



            // ------------------------------------ //
            // --------- HELPER FUNCTIONS --------- //
            // ------------------------------------ //

            function includeScript(path) {
                const script = document.createElement("script");
                script.src = path;
                script.type = "text/javascript";
                document.getElementsByTagName("head")[0].appendChild(script);
            }

            function run(day) {
                const file = document.getElementById("input").files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.readAsText(file, "utf-8");
                    reader.onload = e => window["run_" + YEAR + "_" + numberWith2Digits(day)](e.target.result.replaceAll("\r", ""));
                    reader.onerror = event => console.error("Error reading file.");

                } else {
                    showAlert("error", "Upload a file with a puzzle input first.");
                }
            }

            function numberWith2Digits(n) {
                return (n).toLocaleString('en-UK', {minimumIntegerDigits: 2});
            }

            function hide(id) {
                document.getElementById(id).style.display = "none";
            }

            function show(id) {
                document.getElementById(id).style.display = "block";
            }

            function showAlert(type, text) {
                document.getElementById("alert-" + type).innerHTML = text;
                show("alert-" + type);
                setTimeout(() => hide("alert-" + type), type === "error" ? 6000 : 10000);
            }
            
        </script>
    </body>
</html>
